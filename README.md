## ğŸŒ FINE ğŸŒ
ìœ ê¸°ë™ë¬¼ ì…ì–‘ ì„œë¹„ìŠ¤ ì œê³µ

## ëª©ë¡ 
1. [ê°œìš”](#ê°œìš”)
2. [ê¸°ëŒ€íš¨ê³¼](#ê¸°ëŒ€íš¨ê³¼)
3. [ì‚¬ìš©ë„êµ¬](#-ì‚¬ìš©ë„êµ¬)
4. [ê°œë°œìˆœì„œ](#-ê°œë°œìˆœì„œ)
5. [ë³´ì™„ì ](#-ë³´ì™„ì )

##  âœ¨ ê°œìš”
ìœ ê¸°ê²¬ë“¤ì´ ë§ì•„ì§€ê³  ë¬´ë¶„ë³„í•œ í«ìƒµì˜ ìƒˆë¼ê³µì¥ìœ¼ë¡œ ì¸í•œ ë°˜ë ¤ê²¬ì˜ í•™ëŒ€ ë“±ë“± ë§ì€ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ” í˜„ì¬ í«ìƒµì€ ëˆˆì— ë„ê¸° ì‰½ê²Œ ê·¸ë¦¬ê³  ë‹¤ê°€ê°€ê¸° ì‰½ê²Œ ì¸í…Œë¦¬ì–´ ë˜ì–´ìˆê³  ì²´ì¸ì ì„ ë‚´ëŠ”ê³³ì´ ë§ì•„ì¡ŒìŠµë‹ˆë‹¤. 
í•˜ì§€ë§Œ ìœ ê¸°ê²¬ì„ ë³´í˜¸í•˜ëŠ” ë³´í˜¸ì†ŒëŠ” ëª‡ëª‡ ì‚¬ëŒë“¤ì—ê² ì¢‹ì§€ ì•Šì€ ì´ë¯¸ì§€ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.. ìœ ê¸°ê²¬ì´ ë“¤ì–´ì˜¤ë©´ ëª»ë‚˜ê°€ê³  ì•ˆë½ì‚¬ ë‹¹í•˜ëŠ” ê³³ì´ë¼ê³  ìƒê°í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§ì„ ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¼ë°˜ í«ìƒµì€ ê°•ì•„ì§€ë¥¼ ì…ì–‘ì´ë¼ëŠ” ê°œë…ìœ¼ë¡œ ëŒ€í•˜ëŠ” ê²ƒ ì´ ì•„ë‹Œ íŒë§¤ë¼ëŠ” ëª©ì ìœ¼ë¡œ ë°˜ë ¤ê²¬ë“¤ì˜ ê²¬ê¶Œì„ ë°”ë‹¥ìœ¼ë¡œ ë–¨ì–´íŠ¸ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.
ìœ ê¸°ê²¬ ë¶„ì–‘ë„ ì¼ë°˜ í«ìƒµì²˜ëŸ¼ ì°¾ì•„ê°€ê¸° ì‰½ê³  ë‹¤ê°€ê°€ê¸° í¸í•˜ë‹¤ë©´ ì–´ë–¨ê¹Œ ìƒê°ì„ í•˜ë‹¤ê°€ ì¼ë°˜ ë³´í˜¸ì†Œë“¤ì€ ë‹¤ ë”°ë¡œ ìì‹ ë“¤ ë§Œì˜ ë³´í˜¸ì†Œë¥¼ ìš´ì˜í•˜ëŠë¼ ê°ìì˜ í™ˆí˜ì´ì§€ì—ì„œ ì…ì–‘,ë¶„ì–‘ì„ ë°›ëŠ” ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆê³  ìœ ê¸°ê²¬ ë¶„ì–‘ í†µí•© í”Œë«í¼ìœ¼ë¡œ ì‚¬ëŒë“¤ì—ê²Œ ë‹¤ê°€ê°„ë‹¤ë©´ ìì‹ ì˜ ì§€ì—­ì—ì„œ ì‰½ê³  ê°„í¸í•˜ê²Œ ë˜ ì¢€ ë” ë‹¤ì–‘í•œ ì‹œì„ ìœ¼ë¡œ ìœ ê¸°ê²¬ì„ ë³¼ê±°ë¼ ìƒê°ì´ ë“¤ì–´ ê¸°íší•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
## ê¸°ëŒ€íš¨ê³¼
![11](https://user-images.githubusercontent.com/69295153/106466895-43a05e00-64df-11eb-8310-cacb2e494dfa.PNG)

##  ğŸ”§ ì‚¬ìš©ë„êµ¬
![22](https://user-images.githubusercontent.com/69295153/106466899-44d18b00-64df-11eb-9144-ca27739c153f.PNG)

#### ê¸°íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬ / API

| ë¼ì´ë¸ŒëŸ¬ë¦¬                    |
| ------------------------------|
| jstl                          |
| JSON-simple                   |
| JdataPicker                   |
| cos                           |
| javaMail API                  |
| gson                          | 
| ê³µê³µë°ì´í„°í¬í„¸                | 
| ì¹´ì¹´ì˜¤ ë§µ API                 | 


## ğŸ‘©â€ğŸ’» Member 

#### ì˜¤ìŠ¹í•˜
- ê³µì§€ì‚¬í•­ ê¸°ëŠ¥ ì „ì²´(notice)
- ê¸€ ì‘ì„±ì‹œ ê³ ì •ê¸€ ì„¤ì • ì„ íƒê°€ëŠ¥, ìµœìƒë‹¨ì— ìœ„ì¹˜
- íŒŒì¼ì—…ë¡œë“œ


##  ğŸ”§ ê°œë°œìˆœì„œ
![Fine](https://user-images.githubusercontent.com/69295153/106555996-fa452280-6561-11eb-8402-275fefdcea22.jpg)

### DB ì„¤ê³„
![Copy of fine (1)](https://user-images.githubusercontent.com/69295153/106625198-cdbcf500-65b9-11eb-8d8d-5b2bf0f4b582.png)

### í…Œì´ë¸” ê¸°ìˆ ì„œ
![kh2ì¡° semi_1](https://user-images.githubusercontent.com/69295153/106628659-6143f500-65bd-11eb-9410-fb32a3e1f782.jpg)
![kh2ì¡° semi_2](https://user-images.githubusercontent.com/69295153/106628663-62752200-65bd-11eb-9b1d-0021e40a35b1.jpg)
![kh2ì¡° semi_3](https://user-images.githubusercontent.com/69295153/106628665-630db880-65bd-11eb-9f7b-77147828e2a9.jpg)

### notice í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
![Untitled Diagram](https://user-images.githubusercontent.com/69295153/106564533-ae4daa00-6570-11eb-8ce7-e412ecd999c2.png)

### ì£¼ìš”ì†ŒìŠ¤ 
#### ê²Œì‹œíŒ í˜ì´ì§•
noticeList.jsp
```jsx
		int pageSize = 10; // í˜ì´ì§€ ë‹¹ ê¸€ ìˆ˜
		int pageBlock = 10; // í˜ì´ì§€ ë§í¬ ìˆ˜
		try {			
				//ì´ ê¸€ ê°œìˆ˜ 
			int nCount = nService.getBoardCount();
			System.out.println(nCount);
//í˜ì´ì§€ ìˆ˜ ì´ˆê¸°í™”
			String pageNum = request.getParameter("pageNum");
			if (pageNum == null) {
				pageNum = "1";
			} else if(pageNum.equals("")){
				pageNum = "1";
			}
 //startPage , endPage êµ¬í•˜ëŠ” ì‹
			int currentPage = 1;
			try {
				currentPage = Integer.parseInt(pageNum);
			} catch(Exception e) {
				e.printStackTrace();
			}
			int pageCount = (nCount / pageSize) + (nCount % pageSize == 0 ? 0 : 1);
			int startPage = 1;
			int endPage = 1;
			if (currentPage % pageBlock == 0) {
				startPage = ((currentPage / pageBlock) - 1) * pageBlock + 1;
			} else {
				startPage = ((currentPage / pageBlock)) * pageBlock + 1;
			}
			endPage = startPage + pageBlock - 1;
			if (endPage > pageCount)
				endPage = pageCount;
				// í˜ì´ì§• rownum 
			int startRnum = ((currentPage-1)*pageSize)+1;	
			int endRnum = startRnum + pageSize - 1;			// currentPage*pageSize
			List<NoticeVO> list = nService.getBoardPage(startRnum , endRnum); 
				// ë³´ë‚´ì£¼ê¸° 
			System.out.println(startPage);
			System.out.println(endPage);
		
			request.setAttribute("startPage", startPage);  
			request.setAttribute("endPage", endPage);
			request.setAttribute("PageNum", currentPage);
			request.setAttribute("list", list);	/* ë³€ê²½ : elíƒœê·¸ - jspì´ë‘ ë§ì¶”ê¸°  */
//			System.out.println(list.size()+ ", " + startPage + ", "+ endPage);
			RequestDispatcher disp = request.getRequestDispatcher("/view/notice/noticeList.jsp"); /*ë³€ê²½ : ê²½ë¡œ*/
			disp.forward(request, response);
		
		}catch(Exception e) {
			e.printStackTrace();
		}
	}
```
NoticeDAO.java
```jsx
	// ê³µì§€ì‚¬í•­ ëª©ë¡ í˜ì´ì§• - ê³µì§€ì‚¬í•­ ì´ ê¸€ ê°œìˆ˜
	public int getBoardCount(Connection conn) throws SQLException {
		int cnt = 0;
		String sql = "select COUNT(*) from notice";
		try {
			stmt = conn.createStatement();
			rs = stmt.executeQuery(sql);
			if (rs.next()) {
				cnt = rs.getInt(1);
			}
		} finally {
			close(rs, pstmt);
		}
		return cnt;
	}

	// ê³µì§€ì‚¬í•­ ëª©ë¡
	public List<NoticeVO> getBoardPage(Connection conn, int start, int end) throws SQLException {
		List<NoticeVO> list = new ArrayList<NoticeVO>();
		NoticeVO vo = null;
		String sql = "select * from (select ROWNUM rnum, n.* from (select * from notice order by pin desc, notice_no desc) n)
		where rnum >= ? and rnum <= ?";
		try {
			pstmt = conn.prepareStatement(sql);
			pstmt.setInt(1, start);
			pstmt.setInt(2, end);
			rs = pstmt.executeQuery();
			if (rs.next()) {
				do {
					vo = new NoticeVO();
					vo.setNotice_no(rs.getInt("notice_no"));
					vo.setId(rs.getString("id"));
					vo.setNotice_count(rs.getInt("notice_count"));
					vo.setNotice_title(rs.getString("notice_title"));
					vo.setNotice_contents(rs.getString("notice_contents"));
					vo.setNotice_write_date(rs.getDate("notive_write_date"));
					list.add(vo);
				} while (rs.next());
			}
		} finally {
			close(rs, pstmt);
		}
		return list;
	}
```
noticeList.jsp
```jsx
	<!--í˜ì´ì§• ìˆ«ì-->
			<div class="pagediv">
				<c:if test="${startPage != endPage}">
					<c:forEach varStatus="s"  begin="${startPage}" end="${endPage}" step="1">
						<a href="noticeList.do?pageNum=${s.count}">${s.count}</a>	
					</c:forEach>
				</c:if>
			</div>
```
ê²Œì‹œíŒ í˜ì´ì§•ì„ ìœ„í•œ ì†ŒìŠ¤ì½”ë“œì…ë‹ˆë‹¤. ê¸€ ëª©ë¡ì€ DBì˜ pinì´ë¼ëŠ” ì»¬ëŸ¼ì„ 0ê³¼ 1ë¡œ ì œì•½ì¡°ê±´ì„ ê±¸ì–´ì¤€ í›„, ì²´í¬ê°€ ëœ(=1)ì¸ ê²Œì‹œê¸€ì„ ë¨¼ì € ì •ë ¬í•œ í›„, ë‚ ì§œë³„ë¡œ ì •ì—´í•˜ì—¬ ê³ ì •ê¸€ì´ ìµœìƒë‹¨ìœ¼ë¡œ ì˜¬ ìˆ˜ ìˆê²Œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. 
ë˜í•œ ê³ ì •ê¸€ì€ ìµœëŒ€ 5ê°œê¹Œì§€ë§Œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡í•˜ì—¬, ë¬´ë¶„ë³„í•œ ê³ ì •ê¸€ë¡œ ì¸í•´ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ëŠ” ê²ƒì„ ë°©ì§€í•˜ì˜€ìŠµë‹ˆë‹¤. ê³ ì •ê¸€ ê°œìˆ˜ ì¹´ìš´íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. 
noticeWrite.jsp
```jsx
<script type="text/javascript">
function goRegister(){
	var count = $('#count').val();
	
	if($('#count').val() < 5 || document.getElementById("pin").checked == false){
		var frm = document.write;
		frm.action = "<%=ctxPath%>/noticeWrite.do";
		frm.method = "post";
		frm.submit();		 
	}
	else {
		alert("ê³ ì •ê¸€ì€ ë‹¤ì„¯ê°œë§Œ ë“±ë¡í• ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
	}
}
</script>
<input type = "hidden" id = "count" name = "count" value  = "${cnt}">
```
ê²Œì‹œê¸€ì„ ë“±ë¡í•œ í›„ submitì „ì— DBì— ì €ì¥ëœ pinì»¬ëŸ¼ì˜ ì „ì²´ í•©ì´ 5ê°€ ë„˜ìœ¼ë©´ ë“±ë¡ì´ë˜ì§€ ëª»í•˜ê³  ì•Œë¦¼ ì°½ì´ ëœ¨ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. 
#### ê²Œì‹œê¸€ ê²€ìƒ‰

NoticeDAO.java
```jsx
	public List<NoticeVO> SearchNotice(Connection conn, String word, int startRnum, int endRnum) {
		List<NoticeVO> list = new ArrayList<NoticeVO>();
		String sql = "select * from(select rownum rnum, d.* from "
				+ "(select * from notice where notice_title like ? order by pin desc, notice_no desc) d) "
				+ "where rnum >= ? and rnum <= ?";
		try {
			pstmt = conn.prepareStatement(sql);
			pstmt.setString(1, "%" + word + "%");
			pstmt.setInt(2, startRnum);
			pstmt.setInt(3, endRnum);
			rs = pstmt.executeQuery();
			if (rs.next()) {
				list = new ArrayList<NoticeVO>();
				do {
					NoticeVO vo = new NoticeVO();
					vo.setNotice_no(rs.getInt("notice_no"));
					vo.setId(rs.getString("id"));
					vo.setNotice_count(rs.getInt("notice_count"));
					vo.setNotice_title(rs.getString("notice_title"));
					vo.setNotice_contents(rs.getString("notice_contents"));
					vo.setNotice_write_date(rs.getDate("Notive_write_date"));
					list.add(vo);
				} while (rs.next());
			}
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			close(rs, pstmt);
		}
		return list;
	}
```
word ë¼ëŠ” String ë³€ìˆ˜ì˜ ê°’ì„ ì œëª©ì—ì„œ ì°¾ì•„ë‚´ì–´, í•´ë‹¹ ê²Œì‹œê¸€ì˜ ê¸€ë²ˆí˜¸ì™€, ì‘ì„±ì, ì¡°íšŒìˆ˜, ì œëª©, ë‚´ìš©, ë‚ ì§œë¥¼ ì…‹í•´ì£¼ëŠ” ì†ŒìŠ¤ì½”ë“œì…ë‹ˆë‹¤. 
List<NoticeVO>í˜•ì˜ ë©”ì†Œë“œë¡œ ê²€ìƒ‰ì‹œ ê¸€ ë¦¬ìŠ¤íŠ¸ê°€ ë³´ì—¬ì§€ë©° ê¸€ ê²€ìƒ‰í–ˆì„ ì‹œì—ë„ í˜ì´ì§•ì´ ì˜ ë˜ë„ë¡ startRnumê³¼ endRnumë³€ìˆ˜ë¥¼ ì£¼ì—ˆìŠµë‹ˆë‹¤. 
  
#### ê¸€ ì‘ì„± (íŒŒì¼ì—…ë¡œë“œ)
ê³µì§€ì‚¬í•­ (notice)í˜ì´ì§€ì˜ ê¸€ ì‘ì„±ì€ ê´€ë¦¬ìë§Œ ê°€ëŠ¥í•˜ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ ê´€ë¦¬ìë¡œê·¸ì¸ì„ í•œ ê²½ìš°(memberLev == 3)ì—ë§Œ ê¸€ì‘ì„±ì„ í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. 
noticeList.jsp
```jsx
		<tr>
			<th colspan="5">
		 <c:if test="${memberLev eq 3 }">	
			<a href="noticeFixCount.do">ê¸€ì‘ì„±</a>
			 </c:if>
			</th>
		</tr>
```

noticeWrite.java
```jsx
private void execute(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		String id = (String) request.getSession().getAttribute("sessionID");
		System.out.println(id);
		NoticeService nService = new NoticeService();
		String folderPath = getServletContext().getRealPath("/files");
		MultipartRequest mReq = new MultipartRequest(request, folderPath, 5 * 1024 * 1024, "utf-8",
				new DefaultFileRenamePolicy());
		
		List<String> saveFiles = new ArrayList<String>();
		List<String> originFiles = new ArrayList<String>();
		Enumeration<String> files = mReq.getFileNames();
	
		while (files.hasMoreElements()) {
			String name = files.nextElement();
			String filename = mReq.getFilesystemName(name);
			String originfilename = mReq.getOriginalFileName(name);
			saveFiles.add(filename);
			originFiles.add(originfilename);
		}	
		String title = mReq.getParameter("notice_title");
		String contents = mReq.getParameter("notice_contents");
		int pin = 0;
		if (mReq.getParameter("pin") != null){
		 pin = Integer.parseInt(mReq.getParameter("pin"));
		}

		NoticeVO vo = new NoticeVO();
		if (title != null && contents != null) {
			vo.setNotice_title(title);
			vo.setNotice_contents(contents);
			vo.setNotice_img(saveFiles);
			vo.setPin(pin);
			vo.setId(id);
			
			int result = nService.writeNotice(id, title, contents, saveFiles, pin);
		
			if (result < 0) {
				response.sendRedirect("<script>alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');</script>");
				return;
			}
		}
		response.sendRedirect("noticeList.do");
	}
```
NoticeDAO.java
```jsx
  public int writeNotice(Connection conn, String id, String title, String contents, List<String> img, int pin) {
		int result1 = 0;
		int result2 = 0;
		String query = "INSERT INTO notice (notice_no, id, notice_title, notice_contents,notice_count, pin) VALUES(notice_no_seq.nextval, ?, ?, ?, 0, ?)";
		try {
			pstmt = conn.prepareStatement(query);
		
			pstmt.setString(1, id);
			pstmt.setString(2, title);
			pstmt.setString(3, contents);
			pstmt.setInt(4, pin);
			
			result1 = pstmt.executeUpdate();
		} catch (SQLException e) {
			e.printStackTrace();
		} finally {
			close(rs, pstmt);
		} 
		if (img == null) {
			result2 =1;
		}else {
		for (int i = 0; i < img.size(); i++) {
			query = "INSERT INTO tbl_img (img_no, notice_no, img) VALUES(img_seq.nextval, notice_no_seq.currval, ? )";
			try {
				pstmt = conn.prepareStatement(query);
				pstmt.setString(1, (String)img.get(i));
				result2 = pstmt.executeUpdate();
			} catch (SQLException e) {
				e.printStackTrace();
			} finally {
				close(rs, pstmt);
			}
		}
		}
		if (result1 != 0 || result2 != 0 ) 
			return 1;
			else return 0;
	}
```
ê¸€ ì‘ì„±ì‹œ ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•˜ì§€ ì•Šì•˜ë‹¤ë©´ noticeí…Œì´ë¸”ì— ê¸€ë§Œ ì¸ì„œíŠ¸ë˜ë©° ì´ë¯¸ì§€ê°€ nullì´ ì•„ë‹ì‹œì—ëŠ” tbl_imgì— í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì¸ì„œíŠ¸í•©ë‹ˆë‹¤. 
í•˜ë‚˜ì˜ ê¸€ ë²ˆí˜¸ì— ì´ë¯¸ì§€ê°€ ì—¬ëŸ¬ì¥ ì…ë ¥ë  ì‹œ, ì´ë¯¸ì§€ì˜ ì‚¬ì´ì¦ˆë§Œí¼ ì¿¼ë¦¬ë¬¸ì„ ìˆ˜í–‰í•˜ë©° ì´ë¯¸ì§€ë¥¼ ì…‹í•´ì¤ë‹ˆë‹¤.
ì´ë¯¸ì§€ê°€ ë“±ë¡ì— ì‹¤íŒ¨í–ˆë‹¤ë©´ ê¸€ ë“±ë¡ë„ ì‹¤íŒ¨í•©ë‹ˆë‹¤. 


## ì‘ë™ ì˜ìƒ
ê°„ë‹¨í•œ ì‘ë™ ì˜ìƒì…ë‹ˆë‹¤. 
[![ì˜ˆì œ](https://img.youtube.com/vi/hPoQP96emqs/0.jpg)](https://youtu.be/hPoQP96emqs) 
